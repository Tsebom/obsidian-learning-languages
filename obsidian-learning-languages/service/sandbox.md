---
cssclasses:
  - wide-85
banner_y: 0.49333
banner_lock: true
banner: "![[crayons.jpg]]"
words:
  - word: ominous
    statistics:
      grade: 0
    translate: –∑–ª–æ–≤–µ—â–∏–π
    alternatives:
      - –≥—Ä–æ–∑–Ω—ã–π
      - –∑–ª–æ–≤–µ—â–µ–µ
      - —É–≥—Ä–æ–∂–∞—é—â–∏–π
    definition:
      audio: ""
      meanings:
        - partOfSpeech: adjective
          definitions:
            - definition: Of or pertaining to an omen or to omens; being or exhibiting an omen; significant.
              synonyms: []
              antonyms: []
            - definition: Specifically, giving indication of a coming ill; being an evil omen
              synonyms:
                - inauspicious
                - portentous
                - threatening
              antonyms: []
              example: California poll support for Jerry Brown's tax increases has ominous implications for U.S. taxpayers too Los Angeles Times Headline April 25, 2011
          synonyms:
            - inauspicious
            - portentous
            - threatening
            - portentous
            - sinister
            - threatening
          antonyms: []
  - word: sincerely
    statistics:
      grade: 0
    translate: –∏—Å–∫—Ä–µ–Ω–Ω–µ
    alternatives:
      - –∏—Å–∫—Ä–µ–Ω–Ω–æ
      - –∏—Å–∫—Ä–µ–Ω–Ω–µ–µ
      - –∏—Å–∫—Ä–µ–Ω–Ω–∏–º
    definition:
      audio: https://api.dictionaryapi.dev/media/pronunciations/en/sincerely-us.mp3
      meanings:
        - partOfSpeech: adverb
          definitions:
            - definition: In a sincere or earnest manner; honestly.
              synonyms: []
              antonyms: []
              example: I sincerely hope they make it home safely.
            - definition: A conventional formula for ending a letter, used when the salutation addresses the person for whom the letter is intended by his or her name.
              synonyms: []
              antonyms: []
          synonyms:
            - best regards
            - regards
            - sincerely yours
            - yours sincerely
            - yours truly
            - earnestly
            - genuinely
            - honestly
            - truthfully
          antonyms: []
  - word: orphan
    statistics:
      grade: 0
    translate: —Ä–µ–±–µ–Ω–æ–∫
    alternatives:
      - —Å–∏—Ä–æ—Ç–∞
      - —Å–ª–æ–Ω
      - —Å–∏—Ä–æ—Ç
    definition:
      audio: https://api.dictionaryapi.dev/media/pronunciations/en/orphan-us.mp3
      meanings:
        - partOfSpeech: noun
          definitions:
            - definition: A person, especially a minor, both or (rarely) one of whose parents have died.
              synonyms: []
              antonyms: []
            - definition: A person, especially a minor, whose parents have permanently abandoned them.
              synonyms: []
              antonyms: []
            - definition: A young animal with no mother.
              synonyms: []
              antonyms: []
            - definition: Anything that is unsupported, as by its source, provider or caretaker, by reason of the supporter's demise or decision to abandon.
              synonyms: []
              antonyms: []
            - definition: A single line of type, beginning a paragraph, at the bottom of a column or page.
              synonyms: []
              antonyms: []
            - definition: Any unreferenced object.
              synonyms: []
              antonyms: []
          synonyms: []
          antonyms: []
        - partOfSpeech: verb
          definitions:
            - definition: To deprive of parents (used almost exclusively in the passive)
              synonyms: []
              antonyms: []
              example: What do you do when you come across two orphaned polar bear cubs?
            - definition: To make unavailable, as by removing the last remaining pointer or reference to.
              synonyms: []
              antonyms: []
              example: Removing categories orphans pages from the main category tree.
          synonyms: []
          antonyms: []
        - partOfSpeech: adjective
          definitions:
            - definition: Deprived of parents (also orphaned).
              synonyms: []
              antonyms: []
              example: She is an orphan child.
            - definition: (by extension) Remaining after the removal of some form of support.
              synonyms: []
              antonyms: []
              example: With its government funding curtailed, the gun registry became an orphan program.
          synonyms: []
          antonyms: []
  - word: house
    statistics:
      grade: 0
    translate: –¥–æ–º
    alternatives:
      - –¥–æ–º –¥–æ–º–∞
      - –¥–æ–º–∏–∫
    definition:
      audio: https://api.dictionaryapi.dev/media/pronunciations/en/house-1-ca.mp3
      meanings:
        - partOfSpeech: noun
          definitions:
            - definition: A structure built or serving as an abode of human beings.
              synonyms: []
              antonyms: []
              example: This is my house and my family's ancestral home.
            - definition: The people who live in a house; a household.
              synonyms: []
              antonyms: []
            - definition: A building used for something other than a residence (typically with qualifying word).
              synonyms: []
              antonyms: []
              example: On arriving at the zoo, we immediately headed for the monkey house.
            - definition: The audience for a live theatrical or similar performance.
              synonyms: []
              antonyms: []
            - definition: A theatre.
              synonyms: []
              antonyms: []
              example: After her swan-song, there wasn't a dry eye in the house.
            - definition: A building where a deliberative assembly meets; whence the assembly itself, particularly a component of a legislature.
              synonyms: []
              antonyms: []
              example: The petition was so ridiculous that the house rejected it after minimal debate.
            - definition: A dynasty; a family with its ancestors and descendants, especially a royal or noble one.
              synonyms: []
              antonyms: []
              example: A curse lay upon the House of Atreus.
            - definition: A place of rest or repose.
              synonyms: []
              antonyms: []
            - definition: A grouping of schoolchildren for the purposes of competition in sports and other activities.
              synonyms: []
              antonyms: []
              example: I was a member of Spenser house when I was at school.
            - definition: An animal's shelter or den, or the shell of an animal such as a snail, used for protection.
              synonyms: []
              antonyms: []
            - definition: One of the twelve divisions of an astrological chart.
              synonyms: []
              antonyms: []
            - definition: The fourth Lenormand card.
              synonyms: []
              antonyms: []
            - definition: A square on a chessboard, regarded as the proper place of a piece.
              synonyms: []
              antonyms: []
            - definition: The four concentric circles where points are scored on the ice.
              synonyms: []
              antonyms: []
            - definition: Lotto; bingo.
              synonyms: []
              antonyms: []
            - definition: A children's game in which the players pretend to be members of a household.
              synonyms: []
              antonyms: []
              example: As the babysitter, Emma always acted as the mother whenever the kids demanded to play house.
            - definition: A small stand of trees in a swamp.
              synonyms: []
              antonyms: []
            - definition: (sudoku) A set of cells in a Sudoku puzzle which must contain each digit exactly once, such as a row, column, or 3√ó3 box in classic Sudoku.
              synonyms: []
              antonyms: []
          synonyms:
            - shop
            - shop
          antonyms: []
  - word: rate
    statistics:
      rate: 0
    translate: —Å—Ç–∞–≤–∫–∞
    alternatives:
      - —Å—Ç–∞–≤–∫–∏
      - –Ω–æ—Ä–º–∞
      - —Ä–∞–∑–º–µ—Ä
    definition:
      audio: https://api.dictionaryapi.dev/media/pronunciations/en/rate-us.mp3
      meanings:
        - partOfSpeech: noun
          definitions:
            - definition: The worth of something; value.
              synonyms: []
              antonyms: []
            - definition: The proportional relationship between one amount, value etc. and another.
              synonyms: []
              antonyms: []
              example: At the height of his powers, he was producing pictures at the rate of four a year.
            - definition: Speed.
              synonyms: []
              antonyms: []
              example: The car was speeding down here at a hell of a rate.
            - definition: The relative speed of change or progress.
              synonyms: []
              antonyms: []
              example: The rate of production at the factory is skyrocketing.
            - definition: The price of (an individual) thing; cost.
              synonyms: []
              antonyms: []
              example: He asked quite a rate to take me to the airport.
            - definition: A set price or charge for all examples of a given case, commodity, service etc.
              synonyms: []
              antonyms: []
              example: Postal rates here are low.
            - definition: A wage calculated in relation to a unit of time.
              synonyms: []
              antonyms: []
              example: We pay an hourly rate of between $10 ‚Äì $15 per hour depending on qualifications and experience.
            - definition: Any of various taxes, especially those levied by a local authority.
              synonyms: []
              antonyms: []
              example: I hardly have enough left every month to pay the rates.
            - definition: A class into which ships were assigned based on condition, size etc.; by extension, rank.
              synonyms: []
              antonyms: []
              example: This textbook is first-rate.
            - definition: Established portion or measure; fixed allowance; ration.
              synonyms: []
              antonyms: []
            - definition: Order; arrangement.
              synonyms: []
              antonyms: []
            - definition: Ratification; approval.
              synonyms: []
              antonyms: []
            - definition: The gain or loss of a timepiece in a unit of time.
              synonyms: []
              antonyms: []
              example: daily rate; hourly rate; etc.
          synonyms: []
          antonyms: []
        - partOfSpeech: verb
          definitions:
            - definition: To assign or be assigned a particular rank or level.
              synonyms: []
              antonyms: []
              example: She is rated fourth in the country.
            - definition: To evaluate or estimate the value of.
              synonyms: []
              antonyms: []
              example: They rate his talents highly.
            - definition: To consider or regard.
              synonyms: []
              antonyms: []
              example: He rated this book brilliant.
            - definition: To deserve; to be worth.
              synonyms: []
              antonyms: []
              example: The view here hardly rates a mention in the travel guide.
            - definition: To determine the limits of safe functioning for a machine or electrical device.
              synonyms: []
              antonyms: []
              example: The transformer is rated at 10 watts.
            - definition: To evaluate a property's value for the purposes of local taxation.
              synonyms: []
              antonyms: []
            - definition: To like; to think highly of.
              synonyms: []
              antonyms: []
              example: The customers don't rate the new burgers.
            - definition: To have position (in a certain class).
              synonyms: []
              antonyms: []
              example: He rates as the best cyclist in the country.
            - definition: To have value or standing.
              synonyms: []
              antonyms: []
              example: This last performance of hers didn't rate very high with the judges.
            - definition: To ratify.
              synonyms: []
              antonyms: []
            - definition: To ascertain the exact rate of the gain or loss of (a chronometer) as compared with true time.
              synonyms: []
              antonyms: []
          synonyms:
            - rank
          antonyms: []
  - word: vortex
    statistics: {}
    translate: –≤–∏—Ö—Ä—å
    alternatives:
      - –≤–æ—Ä–æ–Ω–∫–∞
      - –≤–∏—Ö—Ä–µ–≤–æ–π
      - –≤–∏—Ö—Ä–µ–≤—ã–π
    definition:
      audio: https://api.dictionaryapi.dev/media/pronunciations/en/vortex-au.mp3
      meanings:
        - partOfSpeech: noun
          definitions:
            - definition: A whirlwind, whirlpool, or similarly moving matter in the form of a spiral or column.
              synonyms: []
              antonyms: []
            - definition: Anything that involves constant violent or chaotic activity around some centre.
              synonyms: []
              antonyms: []
              example: "2004: the consumer vortex that is East Hampton ‚Äî The New Yorker, 30 August 2004, p.38"
            - definition: Anything that inevitably draws surrounding things into its current.
              synonyms: []
              antonyms: []
            - definition: A supposed collection of particles of very subtle matter, endowed with a rapid rotary motion around an axis which was also the axis of a sun or planet; part of a Cartesian theory accounting for the formation of the universe, and the movements of the bodies composing it.
              synonyms: []
              antonyms: []
            - definition: Any of numerous species of small Turbellaria belonging to Vortex and allied genera.
              synonyms: []
              antonyms: []
          synonyms: []
          antonyms: []
  - word: dog
    statistics: {}
    translate: —Å–æ–±–∞–∫–∞
    alternatives:
      - –ø–µ—Å
      - –ø–µ—Å–∏–∫
    definition:
      audio: https://api.dictionaryapi.dev/media/pronunciations/en/dog-uk.mp3
      meanings:
        - partOfSpeech: noun
          definitions:
            - definition: A mammal, Canis familiaris or Canis lupus familiaris, that has been domesticated for thousands of years, of highly variable appearance due to human breeding.
              synonyms: []
              antonyms: []
              example: The dog barked all night long.
            - definition: Any member of the Family Canidae, including domestic dogs, wolves, coyotes, jackals, foxes, and their relatives (extant and extinct); canid.
              synonyms: []
              antonyms: []
            - definition: A male dog, wolf or fox, as opposed to a bitch or vixen.
              synonyms: []
              antonyms: []
            - definition: A dull, unattractive girl or woman.
              synonyms: []
              antonyms: []
              example: She‚Äôs a real dog.
            - definition: A man (derived from definition 2).
              synonyms: []
              antonyms: []
              example: He's a silly dog.
            - definition: A coward.
              synonyms: []
              antonyms: []
              example: Come back and fight, you dogs!
            - definition: Someone who is morally reprehensible.
              synonyms: []
              antonyms: []
              example: You dirty dog.
            - definition: A sexually aggressive man (cf. horny).
              synonyms: []
              antonyms: []
            - definition: Any of various mechanical devices for holding, gripping, or fastening something, particularly with a tooth-like projection.
              synonyms: []
              antonyms: []
            - definition: "A click or pallet adapted to engage the teeth of a ratchet-wheel, to restrain the back action; a click or pawl. (See also: ratchet, windlass)"
              synonyms: []
              antonyms: []
            - definition: A metal support for logs in a fireplace.
              synonyms: []
              antonyms: []
              example: The dogs were too hot to touch.
            - definition: The eighteenth Lenormand card.
              synonyms: []
              antonyms: []
            - definition: A hot dog.
              synonyms: []
              antonyms: []
            - definition: Underdog.
              synonyms: []
              antonyms: []
            - definition: (almost always in the plural) Foot.
              synonyms: []
              antonyms: []
            - definition: (from "dog and bone") Phone or mobile phone.
              synonyms: []
              antonyms: []
              example: My dog is dead.
            - definition: One of the cones used to divide up a racetrack when training horses.
              synonyms: []
              antonyms: []
            - definition: A flop; a film that performs poorly at the box office.
              synonyms: []
              antonyms: []
          synonyms:
            - Canis canis
            - Canis domesticus
            - Canis familiaris
            - canine
            - domestic dog
            - hound
            - sire
            - stud
            - bloke
            - chap
            - dude
            - fellow
            - guy
            - man
            - click
            - detent
            - pawl
            - andiron
            - dogiron
            - firedog
            - blackguard
            - bounder
            - cad
            - fool
            - heel
            - hound
            - scoundrel
          antonyms: []
        - partOfSpeech: verb
          definitions:
            - definition: To pursue with the intent to catch.
              synonyms: []
              antonyms: []
            - definition: To follow in an annoying or harassing way.
              synonyms: []
              antonyms: []
              example: The woman cursed him so that trouble would dog his every step.
            - definition: To fasten a hatch securely.
              synonyms: []
              antonyms: []
              example: It is very important to dog down these hatches...
            - definition: To watch, or participate, in sexual activity in a public place.
              synonyms: []
              antonyms: []
              example: I admit that I like to dog at my local country park.
            - definition: To intentionally restrict one's productivity as employee; to work at the slowest rate that goes unpunished.
              synonyms: []
              antonyms: []
              example: A surprise inspection of the night shift found that some workers were dogging it.
            - definition: To criticize.
              synonyms: []
              antonyms: []
            - definition: To divide (a watch) with a comrade.
              synonyms: []
              antonyms: []
          synonyms:
            - chase
            - chase after
            - go after
            - pursue
            - tag
            - tail
            - track
            - trail
            - goldbrick
            - soldier
          antonyms: []
        - partOfSpeech: noun
          definitions:
            - definition: Meat from a dog eaten as food.
              synonyms: []
              antonyms: []
              example: We visited South Korea this time around, where we ate dog meat for the first time.
            - definition: Meat prepared to be given to a dog as food.
              synonyms: []
              antonyms: []
            - definition: An insult intended to assert hyperbolically that another person has value only as a corpse to be fed to a dog.
              synonyms: []
              antonyms: []
              example: Did you just step on my blue suede shoes? You're dog meat now!
          synonyms:
            - dog
            - dog food
            - fragrant meat
          antonyms: []
  - word: cat
    statistics: {}
    translate: –∫–æ—à–∫–∞
    alternatives:
      - –∫–æ—Ç
      - –∫–æ—Ç—ë–Ω–æ–∫
      - –∫–æ—Ç–∏–∫
    definition:
      audio: https://api.dictionaryapi.dev/media/pronunciations/en/cat-uk.mp3
      meanings:
        - partOfSpeech: noun
          definitions:
            - definition: "An animal of the family Felidae:"
              synonyms:
                - felid
              antonyms: []
            - definition: "A person:"
              synonyms: []
              antonyms: []
            - definition: A strong tackle used to hoist an anchor to the cathead of a ship.
              synonyms: []
              antonyms: []
            - definition: Short form of cat-o'-nine-tails.
              synonyms: []
              antonyms: []
            - definition: A sturdy merchant sailing vessel (now only in "catboat").
              synonyms: []
              antonyms: []
            - definition: The game of "trap and ball" (also called "cat and dog").
              synonyms: []
              antonyms: []
            - definition: The pointed piece of wood that is struck in the game of tipcat.
              synonyms: []
              antonyms: []
            - definition: A vagina, a vulva; the female external genitalia.
              synonyms: []
              antonyms: []
            - definition: A double tripod (for holding a plate, etc.) with six feet, of which three rest on the ground, in whatever position it is placed.
              synonyms: []
              antonyms: []
            - definition: A wheeled shelter, used in the Middle Ages as a siege weapon to allow assailants to approach enemy defences.
              synonyms:
                - Welsh cat
                - tortoise
              antonyms: []
          synonyms:
            - saber-tooth
            - saber-toothed cat
            - feline
            - feline cat
            - pantherine
            - pantherine cat
            - Caniformia
            - carnivoran
            - cat-like
            - feliform
            - feloid
            - jaguar
            - leopard
            - lion
            - panther
            - tiger
            - Welsh cat
            - tortoise
            - felid
          antonyms: []
        - partOfSpeech: verb
          definitions:
            - definition: To hoist (the anchor) by its ring so that it hangs at the cathead.
              synonyms: []
              antonyms: []
            - definition: To flog with a cat-o'-nine-tails.
              synonyms: []
              antonyms: []
            - definition: To vomit.
              synonyms: []
              antonyms: []
            - definition: To go wandering at night.
              synonyms: []
              antonyms: []
            - definition: To gossip in a catty manner.
              synonyms: []
              antonyms: []
          synonyms: []
          antonyms: []
  - word: fuck
    statistics: {}
    translate: –µ–±–∞—Ç—å
    alternatives:
      - —Ç—Ä–∞—Ö–∞—Ç—å—Å—è
      - –±–ª—è–¥—å
      - —Ç—Ä–∞—Ö–∞—Ç—å
    definition:
      audio: https://api.dictionaryapi.dev/media/pronunciations/en/fuck-uk.mp3
      meanings:
        - partOfSpeech: noun
          definitions:
            - definition: An act of sexual intercourse.
              synonyms: []
              antonyms: []
            - definition: A sexual partner, especially a casual one.
              synonyms: []
              antonyms: []
            - definition: A highly contemptible person.
              synonyms:
                - dickhead
              antonyms: []
            - definition: A thing of no value, a small amount.
              synonyms:
                - shit
              antonyms: []
              example: I don't give a fuck.
          synonyms:
            - dickhead
            - shit
          antonyms: []
        - partOfSpeech: verb
          definitions:
            - definition: To have sexual intercourse, to copulate.
              synonyms:
                - bang
                - do it
                - eff
                - have sex
                - hump
                - screw
                - shag
              antonyms: []
              example: Fighting for peace is like fucking for virginity.
            - definition: To have sexual intercourse with.
              synonyms:
                - bang
                - eff
                - give someone one
                - hump
                - ream
                - screw
                - shag
              antonyms: []
            - definition: To insert one‚Äôs penis, a dildo or other phallic object, into a specified orifice or cleft.
              synonyms: []
              antonyms: []
            - definition: To put in an extremely difficult or impossible situation.
              synonyms: []
              antonyms: []
              example: I'm afraid they're gonna fuck you on this one.
            - definition: To defraud, deface or otherwise treat badly.
              synonyms: []
              antonyms: []
              example: I got fucked at the used car lot.
            - definition: Used to express great displeasure with someone or something.
              synonyms:
                - bugger
                - eff
              antonyms: []
              example: Fuck those jerks, and fuck their stupid rules!
            - definition: (usually followed by up) To break, to destroy.
              synonyms:
                - annihilate
                - obliterate
                - ruin
              antonyms: []
            - definition: To make a joke at one's expense; to make fun of in an embarrassing manner.
              synonyms: []
              antonyms: []
            - definition: To throw, to lob something. (angrily)
              synonyms:
                - feck
              antonyms: []
              example: He fucked the dirty cloth out the window.
            - definition: To scold
              synonyms: []
              antonyms: []
              example: The sergeant fucked me upside down.
          synonyms:
            - annihilate
            - obliterate
            - ruin
            - bang
            - do it
            - eff
            - have sex
            - hump
            - screw
            - shag
            - bang
            - eff
            - give someone one
            - hump
            - ream
            - screw
            - shag
            - bugger
            - eff
            - feck
          antonyms: []
        - partOfSpeech: adverb
          definitions:
            - definition: Used as an intensifier for the words "yes" and "no".
              synonyms:
                - god
                - heck
                - hell
                - shit
              antonyms: []
              example: Do you censor your swearing? ‚Äì Fuck no.
          synonyms:
            - god
            - heck
            - hell
            - shit
          antonyms: []
        - partOfSpeech: interjection
          definitions:
            - definition: Expressing dismay or discontent.
              synonyms:
                - fark
                - feck
                - fook
                - frick
              antonyms: []
              example: Fuck! Why do you have to be so difficult all the time?
            - definition: Expressing surprise.
              synonyms: []
              antonyms: []
              example: Fuck! That movie was good.
          synonyms:
            - fark
            - feck
            - fook
            - frick
          antonyms: []
phrases:
  - phrase: pitching it in meetings
    translate: —Å—Ç–∞–≤–∏—Ç—å –µ–≥–æ –Ω–∞ —Å–æ–±—Ä–∞–Ω–∏—è—Ö
  - phrase: I sincerely hope they make it home safely
    translate: –Ø –∏—Å–∫—Ä–µ–Ω–Ω–µ –Ω–∞–¥–µ—é—Å—å, —á—Ç–æ –æ–Ω–∏ –±–ª–∞–≥–æ–ø–æ–ª—É—á–Ω–æ –≤–µ—Ä–Ω—É—Ç—Å—è –¥–æ–º–æ–π
  - phrase: To scold
    translate: –ß—Ç–æ–±—ã —Ä—É–≥–∞—Ç—å
  - phrase: fuck your ass
    translate: –µ–±–∞—Ç—å —Ç–≤–æ—é –∑–∞–¥–Ω–∏—Ü—É
  - phrase: hello world
    translate: –ø—Ä–∏–≤–µ—Ç, –º–∏—Ä

---

---

> [!info] 
> **This note is existing for experiments with obsidian. Here I will be check my ideas and purpose.**
>  

---

# DataviewJS

```dataviewjs
// –ü–æ–ª—É—á–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
const setting = dv.page("service/settings");

const container = this.container;
const meta = app.plugins.plugins["metaedit"].api;

const libretranslateURL = setting.libretranslateURL;
const API_KEY = setting.API_KEY;

// –ü–æ–ª—É—á–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π —Ñ–∞–π–ª (—Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏–∑ –Ω–µ–≥–æ –∂–µ)
const file = app.workspace.getActiveFile();

// –ü–æ–ª—É—á–∞–µ–º –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ —Å–æ —Å–ª–æ–≤–∞–º–∏
const words = await readData("words");

// –ü–æ–ª—É—á–∞–µ–º –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ —Å —Ñ—Ä–∞–∑–∞–º–∏
const phrases = await readData("phrases");

//------------------VIEW FOR INPUT-------------------------------

// –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –±–ª–æ–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–ª–æ–≤
let addWordsContainer = document.createElement("div");
addWordsContainer.className = "words-add-container"; 

// –ü–æ–ª–µ input –¥–ª—è –≤–≤–æ–¥–∞ —Å–ª–æ–≤–∞ –∏–ª–∏ —Ñ—Ä–∞–∑—ã
let addWordInput = document.createElement("input");
addWordInput.className = "word-add-input";
addWordInput.type = "text";
addWordInput.placeholder = "Word/Phrase";

// –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–ª–æ–≤–∞ –∏–ª–∏ —Ñ—Ä–∞–∑—ã
let addWordBtn = document.createElement("button");
addWordBtn.className = "word-add-btn";
addWordBtn.textContent = "Add";

addWordsContainer.appendChild(addWordInput);
addWordsContainer.appendChild(addWordBtn);

dv.container.appendChild(addWordsContainer);

//------------------FUNCTIONS FOR INPUT-------------------------------

// –°–æ–±—ã—Ç–∏–µ –¥–ª—è –∫–Ω–æ–ø–∫–∏ addWord 
addWordBtn.addEventListener("click", async () => {
	let text = addWordInput.value.trim();

	//–ü—Ä–æ–≤–µ—Ä–∫–∞: –ø–æ–ª–µ –Ω–µ –ø—É—Å—Ç–æ–µ –∏ —Ç–æ–ª—å–∫–æ –ª–∞—Ç–∏–Ω–∏—Ü–∞ + –ø—Ä–æ–±–µ–ª—ã
	if (!text || !/^[A-Za-z][A-Za-z .,;:'"!?-]*$/.test(text)) {
		setTimeout(() => showToast("Please enter a word or a phrase using only Latin letters"));
		addWordInput.placeholder = "Please enter a word or a phrase using only Latin letters";
		addWordInput.value = ""; // –æ—á–∏—â–∞–µ–º –ø–æ–ª–µ –ø–æ—Å–ª–µ alert
		addWordInput.focus(); // –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ñ–æ–∫—É—Å –∫ –ø–æ–ª—é –≤–≤–æ–¥–∞
		return;
	} else {
		addWordInput.placeholder = "Word/Phrase";
	}

	// –ü—Ä–æ–≤–µ—Ä–∫–∞: —Å–ª–æ–≤–æ –∏–ª–∏ —Ñ—Ä–∞–∑–∞
	try {
		if (text.includes(" ")) {
			const phrasesAttr = "phrases";
			let translationPhrase = await getTranslation(text);    // –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è —Ñ—Ä–∞–∑
			const updateData = await attributeData(phraseData(text, translationPhrase), phrasesAttr)
			if (updateData) await writeData(phrasesAttr, updateData);
		} else {
			const wordsAttr = "words";
			let translationWord = await getTranslation(text);        // —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–¥–∏–Ω–æ—á–Ω–æ–≥–æ —Å–ª–æ–≤–∞
			let definitionWord = await getDefinition(text);   // –ø–æ–ª—É—á–∞–µ–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
			const updateData = await attributeData(wordData(text, translationWord, definitionWord), wordsAttr);
			if (updateData) await writeData(wordsAttr, updateData);
		}
	} catch (err) {
		addWordInput.focus(); // –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ñ–æ–∫—É—Å –ø—Ä–∏ –æ—à–∏–±–∫–µ
	} finally {
		addWordInput.value = ""; // –æ—á–∏—â–∞–µ–º –ø–æ–ª–µ –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ
	}
});

// –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–ª–∞–≤–∏—à–∏ Enter –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞
addWordInput.addEventListener("keypress", (e) => {
	if (e.key === "Enter") {
		addWordBtn.click(); // –∏–º–∏—Ç–∏—Ä—É–µ–º –∫–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ
	}
});

// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç —Å —Å–µ—Ä–≤–µ—Ä–∞ Libretranslate –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
async function getTranslation(text) {
	try {
		// –°–æ–∑–¥–∞–µ–º AbortController –¥–ª—è —Ç–∞–π–º–∞—É—Ç–∞
		const controller = new AbortController();
		const timeoutId = setTimeout(() => controller.abort(), 10000); // 10 —Å–µ–∫—É–Ω–¥ —Ç–∞–π–º–∞—É—Ç

		const res = await fetch(libretranslateURL, {
			method: "POST",
			body: JSON.stringify({
				q: text,
				source: "en",
				target: "ru",
				format: "text",
				alternatives: 3,
				api_key: API_KEY || undefined // —É–±–∏—Ä–∞–µ–º –ø—É—Å—Ç–æ–π –∫–ª—é—á
			}),
			headers: { "Content-Type": "application/json" },
			signal: controller.signal
		});

		clearTimeout(timeoutId);

		if (!res.ok) {
			const errorText = await res.text();
			throw new Error(`Translation API error: ${res.status} - ${errorText}`);
		}

		const data = await res.json();
		
		// –í–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞
		if (!data || typeof data !== 'object') {
			throw new Error('Invalid response format from translation API');
		}

		return data;

	} catch (err) {			
		// C–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
		let errorMessage = "Translation failed";
		if (err.name === 'AbortError') {
			errorMessage = "Translation timeout - Libretranslate server is not responding";
		} else if (err.message.includes('Failed to fetch')) {
			errorMessage = "Cannot connect to translation server. Check if LibreTranslate is running";
		} else if (err.message.includes('Translation API error')) {
			errorMessage = err.message;
		}
		setTimeout(() => showToast(errorMessage));
		return { 
			translatedText: "",
			alternatives: [] 
		};
	}
}

// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç —Å —Å–µ—Ä–≤–∏—Å–∞ Free Dictionary API –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
async function getDefinition(word) {
	try {
		// –°–æ–∑–¥–∞–µ–º AbortController –¥–ª—è —Ç–∞–π–º–∞—É—Ç–∞
		const controller = new AbortController();
		const timeoutId = setTimeout(() => controller.abort(), 15000); // 15 —Å–µ–∫—É–Ω–¥ —Ç–∞–π–º–∞—É—Ç

		const res = await fetch(
			`https://api.dictionaryapi.dev/api/v2/entries/en/${encodeURIComponent(word)}`,
			{
				signal: controller.signal
			}
		);
		
		clearTimeout(timeoutId);

		if (!res.ok) {
			if (res.status === 404) {
				setTimeout(() => showToast(`Word "${word}" not found in dictionary`));
				return [];
			}
			throw new Error(`Dictionary API error: ${res.status}`);
		}

		const data = await res.json();
		
		// –í–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞
		if (!Array.isArray(data)) {
			setTimeout(() => showToast('Invalid response format from dictionary API'));
			return [];
		}

		return data;
	} catch (err) {
		setTimeout(() => showToast(`Dictionary API error: ${err}`));
		
		// –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
		if (err.name === 'AbortError') {
			setTimeout(() => showToast('Dictionary API timeout - server is not responding'));
		} else if (err.message.includes('Failed to fetch')) {
			setTimeout(() => showToast('Cannot connect to dictionary server. Check your internet connection'));
		}
		
		return [];
	}
}

// –§–æ—Ä–º–∏—Ä—É–µ–º –æ–±—ä–µ–∫—Ç —Å–ª–æ–≤–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ –∞—Ç—Ä–∏–±—É—Ç
function wordData(word, libretranslate, definition) {
	// –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
	if (!word || typeof word !== 'string') {
		setTimeout(() => showToast('Invalid word parameter in wordData'));
		return null;
	}

	// –ï—Å–ª–∏ –Ω–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
	if (!Array.isArray(definition) || !definition[0]) { 
		return { 
			word: word.trim(),
			statistics: {
				grade: 0
			},
			translate: libretranslate?.translatedText || "",
			alternatives: libretranslate?.alternatives ?? [],
			definition: {
				audio: "",
				meanings: []
			}
		};
	}

	// –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ñ–æ–Ω–µ—Ç–∏–∫–∏
	let audioUrl = "";
	try {
		const phonetics = definition[0].phonetics;
		if (Array.isArray(phonetics)) {
			const phonetic = phonetics.find(p => p && p.audio && typeof p.audio === 'string');
			if (phonetic) {
				if (phonetic.audio.startsWith("https:")) {
					audioUrl = phonetic.audio;
				} else if (phonetic.audio.startsWith("//")) {
					audioUrl = `https:${phonetic.audio}`;
				} else if (phonetic.audio.startsWith("/")) {
					audioUrl = `https:${phonetic.audio}`;
				} else {
					audioUrl = phonetic.audio; // —É–∂–µ –ø–æ–ª–Ω—ã–π URL
				}
			}
		}
	} catch (err) {
		setTimeout(() => showToast(`Error processing audio URL: ${err}`));
	}

	// –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π
	let meanings = [];
	try {
		meanings = definition[0].meanings || [];
		if (!Array.isArray(meanings)) {
			meanings = [];
		}
	} catch (err) {
		setTimeout(() => showToast(`Error processing meanings: ${err}`));
	}

	return {
		word: word.trim(),
		statistics: {
			grade: 0
		},
		translate: libretranslate?.translatedText || "",
		alternatives: libretranslate?.alternatives ?? [],
		definition: {
			audio: audioUrl,
			meanings: meanings
		}
	};
}

// –§–æ—Ä–º–∏—Ä—É–µ–º –æ–±—ä–µ–∫—Ç —Ñ—Ä–∞–∑—ã –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ –∞—Ç—Ä–∏–±—É—Ç
function phraseData(phrase, libretranslate) {
		// –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
		if (!phrase || typeof phrase !== 'string') {
			setTimeout(() => showToast('Invalid phrase parameter in phraseData'));
			return null;
		}

		// –û—á–∏—â–∞–µ–º —Ñ—Ä–∞–∑—É –æ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤
		const cleanPhrase = phrase.trim();
		
		if (!cleanPhrase) {
			setTimeout(() => showToast('Empty phrase in phraseData'));
			return null;
		}

		return {
			phrase: cleanPhrase,
			translate: libretranslate?.translatedText || "",
		};
}

// –§–æ—Ä–º–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞—Ç—Ä–∏–±—É—Ç–∞
async function attributeData(data, attribute) {
	// –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
	if (!data || typeof data !== "object" || Object.keys(data).length === 0) {
		setTimeout(() => showToast('Invalid data parameter in attributeData'));
		return null;
	}

	if (!attribute || typeof attribute !== 'string') {
		setTimeout(() => showToast('Invalid attribute parameter in attributeData'));
		return null;
	}

	try {
		const currentList = await readData(attribute);
		const list = Array.isArray(currentList) ? [...currentList] : [];

		// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
		const keyField = ("word" in data ? "word" : ("phrase" in data ? "phrase" : null));
		
		if (!keyField) {
			setTimeout(() => showToast('Invalid data structure: missing word or phrase field'));
			return null;
		}

		// –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç—ã (—Ä–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ)
		const exists = list.some(item => {
			if (item && typeof item === "object" && keyField in item) {
				const existingValue = String(item[keyField]).toLowerCase().trim();
				const newValue = String(data[keyField]).toLowerCase().trim();
				return existingValue === newValue;
			}
			return false;
		});

		if (exists) {
			setTimeout(() => showToast(`"${data[keyField]}" already exists in your ${attribute} list`));
			return null;
		}

	// –ó–∞—â–∏—Ç–∏–º—Å—è –æ—Ç –ø—É—Å—Ç—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
	if (!data || typeof data !== "object" || Object.keys(data).length === 0) {
		return list;
	}

		// –î–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–∞—á–∞–ª–æ —Å–ø–∏—Å–∫–∞ (–Ω–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å–≤–µ—Ä—Ö—É)
		list.unshift(data);

		return list;

	} catch (error) {
		setTimeout(() => showToast(`Error in attributeData: ${err}`));
		return null;
	}
}


/////////////////////////////////////////////////////////////////////


//------------------VIEW LAST PHRASE-------------------------

let lastPhraseContainer = document.createElement("div");
lastPhraseContainer.className = "last-phrase-container";

let lastPhraseSourse = document.createElement("div");
lastPhraseSourse.className = "last-phrase-sourse";

let lastPhraseTarget = document.createElement("div");
lastPhraseTarget.className = "last-phrase-target";

if (phrases && phrases.length > 0) {
	lastPhraseSourse.textContent = phrases[0].phrase;
	lastPhraseTarget.textContent = phrases[0].translate;
}

lastPhraseContainer.appendChild(lastPhraseSourse);
lastPhraseContainer.appendChild(lastPhraseTarget);

// –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã —Å–ª–æ–≤ –∏ —Ñ—Ä–∞–∑
let tableContainer = document.createElement("div");
tableContainer.className = "table-words-container";

//------------------VIEW WORDS------------------------------------

// –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–ª–æ–≤ –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Å–ª–æ–≤–∞
let wordsInfoContainer = document.createElement("div");
wordsInfoContainer.className = "words-info-container";

// –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–ª–æ–≤
let wordsContainer = document.createElement("div");
wordsContainer.className = "words-container"; 

wordsContainer.appendChild(createTitle("Words"));

// –£–ø–∞–∫–æ–≤—ã–≤–∞–µ–º –≤—Å–µ —Å–ª–æ–≤–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–ª–æ–≤
let index = 0;
words.forEach(w => {
	wordsContainer.appendChild(createWordRow(w, index));
	index++;
});

//------------------VIEW DEFINITION-------------------------------

// –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å–ª–æ–≤–∞
let wordDefinitionContainer = document.createElement("div");
wordDefinitionContainer.className = "word-definition-container";

// –î–æ–±–∞–≤–ª—è–µ–º title difinition
wordDefinitionContainer.appendChild(createTitle("Definition"));

// –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è partOfSpeach –∏ definition
let posAndDefinitionContainer = document.createElement("div");
posAndDefinitionContainer.className = "pos-and-definition-container";

posAndDefinitionContainer.appendChild(fillDefinition(words[0]));

// –î–æ–±–∞–≤–ª—è–µ–º –ø–æ—Å–ª–µ title –∏ –±—É–¥–µ–º –æ–±—ä–Ω–æ–≤–ª—è—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
wordDefinitionContainer.appendChild(posAndDefinitionContainer);

// –£–ø–∞–∫–æ–≤—ã–≤–∞–µ–º wordsContainer –∏ wordDefinitionContainer –≤ flex –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
wordsInfoContainer.appendChild(wordsContainer);
wordsInfoContainer.appendChild(wordDefinitionContainer);

// –î–æ–±–∞–≤–ª—è–µ–º –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ç–∞–±–ª–∏—Ü—ã —Å–ª–æ–≤ –∏ —Ñ—Ä–∞–∑
tableContainer.appendChild(wordsInfoContainer);

//------------------VIEW PHRASES--------------------------------

// –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ñ—Ä–∞–∑
let phrasesContainer = document.createElement("div");
phrasesContainer.className = "phrases-container"; 

phrasesContainer.appendChild(createTitle("Phrases"));

// –£–ø–∞–∫–æ–≤—ã–≤–∞–µ–º –≤—Å–µ —Ñ—Ä–∞–∑—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ñ—Ä–∞–∑
index = 0;
phrases.forEach(p => {
	phrasesContainer.appendChild(createPhraseRow(p, index));
	index++;
});

// –£–ø–∞–∫–æ–≤—ã–≤–∞–µ–º –≤ –æ–±—â–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
tableContainer.appendChild(phrasesContainer);

// –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –≤ –∑–∞–º–µ—Ç–∫–µ
dv.container.appendChild(lastPhraseContainer);
dv.container.appendChild(tableContainer);

//------------------FUNCTIONS FOR INFO BLOCK-------------------------------

// –°–æ–∑–¥–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
function createTitle(title) {
	let titleContainer = document.createElement("div");
	titleContainer.className = "word-title-container";

	let titleContent = document.createElement("h1");
	titleContent.className = "word-title";
	titleContent.textContent = `${title}`;

	titleContainer.appendChild(titleContent);

	return titleContainer
}

// –°–æ–∑–¥–∞–µ–º —Å—Ç—Ä–æ–∫—É —Å –¥–∞–Ω–Ω—ã–º–∏ —Å–ª–æ–≤–∞
function createWordRow(item, index) {
	const wordItem = item?.word ?? "";
	const translateItem = item?.translate ?? "";

	const audioUrl = item?.definition?.audio ?? "";
	const audio = new Audio(audioUrl);

	// –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–ª–æ–≤–∞
	let wordRowContainer = document.createElement("div");
	wordRowContainer.className = "word-row-container";

	wordRowContainer.addEventListener("click", (event) => {
		let curentTarget = event.currentTarget;

		const parent = curentTarget.parentElement;
		const children = Array.from(parent.children);

		children.forEach(child => {
			if (child.className !== "word-title-container") {
				child.style = "border-bottom: 1px solid var(--text-muted);";
			}
		});

		curentTarget.style = "border: 1px solid var(--text-title-h1) !important;";

		posAndDefinitionContainer.innerHTML = ""; 
		posAndDefinitionContainer.appendChild(fillDefinition(words[index]));
	});
 
	// –°–æ–∑–¥–∞–µ–º –∞—É–¥–∏–æ –∫–Ω–æ–ø–∫—É
	let audioButton = document.createElement("button");
	audioButton.className = "word-btn word-audio-btn";
	audioButton.textContent = "üîä";
	audioButton.addEventListener("click", () => {
		audio.play();
	});

	// –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–ª–æ–≤–∞ + —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
	let word = document.createElement("div");
	word.className = "word-container";
	word.innerText = wordItem;

		// –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ + —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
	let translate = document.createElement("div");
	translate.className = "word-container";
	translate.innerText = translateItem;

	// –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É —É–¥–∞–ª–µ–Ω–∏—è —Å–ª–æ–≤–∞
	let wordDelete = document.createElement("button");
	wordDelete.className = "word-btn word-delete-btn";
	wordDelete.textContent = "‚ùå";
	wordDelete.addEventListener("click", async () => {
		// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Å–ª–æ–≤–∞
		words.splice(index, 1);
		await writeData("words", words);
	});

	// –£–ø–∞–∫–æ–≤—ã–≤–∞–µ–º –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–ª–æ–≤–∞
	wordRowContainer.appendChild(audioButton)
	wordRowContainer.appendChild(word);
	wordRowContainer.appendChild(translate);
	wordRowContainer.appendChild(wordDelete);

	if (index === 0 ) {
		wordRowContainer.style = "border: 1px solid var(--text-title-h1);";
	}

	return wordRowContainer;
}

// –ü–æ–ª—É—á–∞–µ–º meanings –∏–∑ words[index]
function createPartsOfSpeech(item = words[0]) {
	const meanings = item?.definition?.meanings ?? [];

	if (!meanings && meanings.length === 0) {
		return null;
	}

	return meanings;
}

// –°–æ–∑–¥–∞—Ç—å –ø–∞—Ä–∞–≥—Ä–∞—Ñ –¥–ª—è definition
function appendParagraph(text) {
	let paragraphContainer = document.createElement("div");
	paragraphContainer.style = "display: flex; margin-bottom: 5px;";

	let textContainer = document.createElement("div");

	let paragraph = document.createElement("p");
	paragraph.style = "padding-left: 20px; margin: 0px";
	paragraph.textContent = `${text}`;

	let btn = document.createElement("button");
	btn.textContent = "Translate";

	textContainer.appendChild(paragraph);

	let click = 1;
	btn.addEventListener("click", async () => {
		if(click) {
			click = 0;
			let taranslate = await getTranslation(text);

			let paragraph = document.createElement("p");
			paragraph.style = "padding-left: 20px; margin: 0px; border-top: 1px dashed var(--text-muted); ";
			paragraph.textContent = `${taranslate.translatedText}`;

			textContainer.appendChild(paragraph);
		}
	})

	paragraphContainer.appendChild(btn);
	paragraphContainer.appendChild(textContainer);

	return paragraphContainer;
}

// –ó–∞–ø–æ–ª–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–º–∏ difinition
function fillDefinition(data) {
	// –ü–æ–ª—É—á–∞–µ–º –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ partOfSpeach
	let partsOfSpeach = createPartsOfSpeech(data);

	let partsOfSpeechContainer = document.createElement("div");

	partsOfSpeach.forEach(p => {
		// –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —á–∞—Å—Ç–∏ —Ä–µ—á–∏
		let partOfSpeechContainer = document.createElement("div");
		partOfSpeechContainer.className = "partofspeach-container";

		// –ß–∞—Å—Ç—å —Ä–µ—á–∏
		let pos = document.createElement("div");
		pos.className = "pos";
		pos.textContent = `${p.partOfSpeech + ":"}`;

		// –ü–æ–ª—É—á–∞–µ–º –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ definitions
		const definitions = p?.definitions ?? [];

	// –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤—Å–µ—Ö definitions
		let definitionsContainer = document.createElement("div");
		definitionsContainer.className = "definitions-container";

		definitions.forEach(d => {
			// –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è defenitions
			let definitionContainer = document.createElement("div");
			definitionContainer.className = "definition-container";

			// –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è defenition
			let definition = document.createElement("div");
			d.definition ? definition.textContent = `definition: ` : "";
			definition.appendChild(appendParagraph(`${d.definition}`));

			// –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è example
			let example = document.createElement("div");
			if (d.example) {
				example.textContent = `example: `;
				example.appendChild(appendParagraph(`${d.example}`));
			}

			// –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è synonyms
			let synonyms = document.createElement("div");
			if (d.synonyms && d.synonyms.length !== 0) {
				synonyms.textContent = `synonyms: `;
				d.synonyms.forEach(s => {
					synonyms.appendChild(appendParagraph(`${s}`));
				})
			}

			// –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è antonyms
			let antonyms = document.createElement("div");
			if (d.antonyms && d.antonyms.length !== 0) {
				antonyms.textContent = `antonyms: `;
				d.antonyms.forEach(a => {
					antonyms.appendChild(appendParagraph(`${a}`));
				})
			}

			// –£–ø–∞–∫–æ–≤—ã–≤–∞–µ–º definitionContainer
			definitionContainer.appendChild(definition);
			definitionContainer.appendChild(example);
			definitionContainer.appendChild(synonyms);
			definitionContainer.appendChild(antonyms);
			
			// –£–ø–∞–∫–æ–≤—ã–≤–∞–µ–º defenitions –¥–ª—è –∫–æ–Ω–∫—Ä–∫—Ç–Ω–æ–≥–æ partofspeech
			definitionsContainer.appendChild(definitionContainer);
		});

		partOfSpeechContainer.appendChild(pos);
		partOfSpeechContainer.appendChild(definitionsContainer);

		partsOfSpeechContainer.appendChild(partOfSpeechContainer);
	});

	return partsOfSpeechContainer;
}

// –°–æ–∑–¥–∞–µ–º —Å—Ç—Ä–æ–∫—É —Å –¥–∞–Ω–Ω—ã–º–∏ —Ñ—Ä–∞–∑—ã
function createPhraseRow(item, index) {
	const phraseItem = item?.phrase ?? "";
	const translateItem = item?.translate ?? "";

	// –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ñ—Ä–∞–∑
	let phraseRowContainer = document.createElement("div");
	phraseRowContainer.className = "phrase-row-container";

	// –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ñ—Ä–∞–∑—ã + —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
	let phrase = document.createElement("div");
	phrase.className = "phrase-container";
	phrase.innerText = phraseItem;

	// –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ + —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
	let translate = document.createElement("div");
	translate.className = "phrase-container";
	translate.innerText = translateItem;


	// –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É —É–¥–∞–ª–µ–Ω–∏—è —Å–ª–æ–≤–∞
	let phraseDelete = document.createElement("button");
	phraseDelete.className = "phrase-btn phrase-delete-btn";
	phraseDelete.textContent = "‚ùå";
	phraseDelete.addEventListener("click", async () => {
		// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Å–ª–æ–≤–∞
		phrases.splice(index, 1);
		await writeData("phrases", phrases);
	});

	// –£–ø–∞–∫–æ–≤—ã–≤–∞–µ–º –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ñ—Ä–∞–∑
	phraseRowContainer.appendChild(phrase);
	phraseRowContainer.appendChild(translate);
	phraseRowContainer.appendChild(phraseDelete);

	return phraseRowContainer;
}

//------------------FUNCTIONS-------------------------------

// –ß–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –∞—Ç—Ä–∏–±—É—Ç–∞ —Ñ–∞–π–ª–∞
async function readData(attribute) {
	try {
		const value = await meta.getPropertyValue(attribute, file);
		if (Array.isArray(value)) return value;
		if (value == null) return [];
		if (typeof value === "object") return [value];
		return [];
	} catch (e) {
		return [];
	}
}

// –î–æ–±–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –∞—Ç—Ä–∏–±—É—Ç —Ñ–∞–π–ª–∞
async function writeData(attribute, data) {
	await meta.update(attribute, data, file);
}

//------------------CUSTOM ALERT-------------------------------

const toastContainer = document.createElement("div");
toastContainer.style.position = "fixed";
toastContainer.style.top = "50%";
toastContainer.style.left = "50%";
toastContainer.style.transform = "translate(-50%, -50%)";
toastContainer.style.display = "flex";
toastContainer.style.flexDirection = "column";
toastContainer.style.gap = "10px";
toastContainer.style.zIndex = "9999";
document.body.appendChild(toastContainer);

function showToast(message, duration = 3000) {
  const toast = document.createElement("div");
  toast.textContent = message;

  // –°—Ç–∏–ª–∏ –¥–ª—è —Ç–æ—Å—Ç–∞
  toast.style.background = "#333";
	toast.style.fontSize= "30px";
  toast.style.color = "#ff0000";
  toast.style.padding = "20px 25px";
  toast.style.borderRadius = "10px";
  toast.style.boxShadow = "0 4px 6px rgba(0,0,0,0.2)";
  toast.style.fontFamily = "sans-serif";
  toast.style.opacity = "0";
  toast.style.transform = "translateY(-20px)";
  toast.style.transition = "opacity 0.3s, transform 0.3s";

  toastContainer.appendChild(toast);

  // –ø–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ
  requestAnimationFrame(() => {
    toast.style.opacity = "1";
    toast.style.transform = "translateY(0)";
  });

  // —Å–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ duration
  setTimeout(() => {
    toast.style.opacity = "0";
    toast.style.transform = "translateY(-20px)";
    setTimeout(() => toast.remove(), 300);
  }, duration);
}

```